## Εργασία 3 - Φοιτητές: Χωραφάς Χρήστος(8718)/Φάββας Αντώνης(8675), Ομάδα 33

## <pre>Βήμα 1)</pre>  


<pre><b>Ερώτημα 1</b></pre>  <br>
 
  
<pre> 1.1 - Υπάρχουν ακεκτοί παράγοντες που επηρεάζουν την κατανάλωση ενέργειας από τον επεξεργαστή (CPU).
Οι πιο βασικοί από αυτούς είναι Α)Dynamic Power, B)Short-Cirquit Power, Γ)Leakage Power και συνδέονται 
με την σχέση (Pcpu = Pdyn + Psc + Pleak).

 Αναλυτικότερα το Dynamic Power προέρχεται από την δραστηριότητα των λογικών πυλών στο εσωτερικό της CPU. 
Όταν μια λογική πύλη μεταβαίνει από μία κατάσταση σε μία άλλη, υπάρχει ροή ενέργειας καθώς για να ολοκληρωθεί 
αυτή η μετάβαση οι πυκνωτές φορτίζονται και εκφορτίζονται στο εσωτερικό της. Γενικά το Dynamic Power είναι 
ανάλογο με μία σειρά παραγόντων, όπως Α)Συνολική Χωρητικότητα των ηλεκτρονικών διατάξεων, Β) Παροχή 
ηλεκτρικού ρεύματος, Γ) Συχνότητα  του ρολογιού και Δ)Παράγοντα-Δραστηριότητας (Activity-Factor). Ο υπλογισμός 
της συνολικής χωρητικότητας, πραγματοποιείται μέσα από την αποσύνθεση του μοντέλου του επεξεργαστή σε μικρότερα
και όπως είναι φυσικό απλούστερα σύνολα κυκλωμάτων, των οποίων η χωρητικότητα είναι πιο εύκολο να υπολογισθεί
χρησιμοποιώντας αναλυτικά μοντέλα. Ακόμα σημαντικό είναι πως ο υπολογισμός του Παράγοντα-Δραστηριότητας, 
γίνεται χρησιμοποιώντας στατιστικά δεδομένα που σχετίζονται με τις απαιτήσεις πρόσβασης (Requests-Access)
του επεξεργαστή, δεδομένα τα οποία όπως είναι λογικό παράγονται από δίαφορες προσομοιώσεις.

 Τα τρανζίστορς στις διάφορες ηλεκτρονικές διατάξεις του επεξεργαστή παρουσιάζουν μία ενεργειακή διαρροή (Leakage), 
καθώς αποβάλλουν συνεχώς static-power. To Leakage Power χωρίζεται σε δύο υποκατηγορίες Α)Subthreshold Leakage το 
οποίο εμφανίζεται καθώς μία πολύ μικρή ποσότητα ρεύματος ρέει μέσα από το source και το drain του τρανζίστορ, ακόμα 
και όταν αυτό βρίσκεται σε κατάσταση απενεργοποίησης (off-state). Ωστόσο πρέπει να τονιστεί πως παρόλο που αυτό 
το ρεύμα είναι εξαιρετικά μικρό για κάθε τρανζίστορ, αν έχουμε για παράδειγμα εκατομμύρια ή δισεκατομμύρια τρανζίστορς 
(όπως συμβαίνει στην πραγματικότητα στο εσωτερικό των CPU) τότε το άθροισμα όλων αυτών των ρευμάτων διαρροής είναι 
εξαιρετικά σημαντικό. H δεύτερη υποκατηγορία Β) Gate Leakage προέρχεται από την διαρροή ενός μικρού ρεύματος από την 
πύλη (gate) του κάθε τρανζίστορ και διαφορεοποιείται αρκετά ανάλογα με την κατάσταση της CPU. Επίσης πρέπει να 
τονιστεί πως η σημασία αυτών των μικρο-ρευμάτων διαρροής εξαρτάται άμεσα από την κατάσταση, τις διαστάσεις, τις 
φυσικές ιδιότητες ακόμα μερικές φορές και από την θερμοκρασία των τρανζίστορς. Τέλος πολύ σημαντικό είναι το γεγονός 
πως η συνολική ποσότητα του Leakage Power φένεται να παρουσιάζει μεγάλες τιμές όταν ο παρουσιάζονται υψηλές θερμοκρασίες.

 (Στο εργαστήριο ο κ. Παπαυεσταθίου μας ανέφερε πως το Leakage Power σχετίζεται άμεσα με την ενέργεια που καταναλώνεται 
στην CPU όταν αυτή βρίσκεται σε κατάσταση "standby".)
 
 1.2 - Αν τρέχαμε δύο διαφορετικά προγράμματα στον ίδιο επεξεργαστή, ο παράγοντας που θα παρουσίαζε διαφορά ανάμεσα 
 στις δύο δοκιμές θα ήταν το Dynamic Power καθώς λογικά θα είχαμε διαφορετικό activity-factor ανάμεσα στα προγράμματα. 
 Το πρόγραμμα που θα περιέχει περισσότερες εντολές, προσβάσεις στην μνήμη  και διαδικασίες ελέγχου πάνω σε branches, 
 θα έχει λογικά και μεγαλύτερο activity-factor άρα και μεγαλύτερο Dynamic Power.

 1.3 - Η συνολική χρονική διάρκεια διεκπεραίωσης του προγράμματος, έχει σημασία στην συνολική κατανάλωση ενέργειας του 
 επεξεργαστή, καθώς σχετίζεται άμεσα με το Dynamic Power.</pre>  
   
   <br><br> 
<pre><b>Ερώτημα 2</b></pre>  <br>

    
   <br><br>
<pre><b>Ερώτημα 3</b></pre>  <br>  


<pre>  Και στις 2 περιπτώσεις τα δίαφορα μέρη του συστήματος χρονίζονται στο 1GHz. Ωστόσο οι πυρήνες και οι 
διάφοροι επεξεργαστές που ενδεχομένως να προστεθούν στο σύστημα χρονίζονται στα 2GHz (Α περίπτωση) και 
στο 1GHz (Β περίπτωση) αντίστοιχα. Επαλήθευση αυτών των παρατηρήσεων αποτελούν αυτά τα κομμάτια κώδικα 
από το .json αρχείο (A περίπτωση) : 
  
  "name": "cpu_clk_domain",                               
            "clock": [
                500
            ],  

  "name": "clk_domain", 
            "clock": [
                1000
            ], </pre>
     
     
<pre>  Όσον αφορά το scaling πρέπει να αναφέρουμε ότι στις μικρές συχνότητες υπάρχει αρκετά καλό scaling. 
Ωστόστο όσο αυξάνουμε την συχνότητα του επεξεργαστή τόσο μικραίνει ο ρυθμός με τον οποίο μειώνεται ο χρόνος
εκτέλεσης της προσομοίωσης. Αυτό συμβαίνει γιατι ο επεξεργαστής είναι συνήθως αρκετά πιο γρήγορος απο τα 
υπόλοιπα στοιχεία του συστήματος, συνεπώς αναγκάζεται να περιμένει. Στα πλαίσια αυτής της λογικής, ένας 
επεξεργαστής των 8GHz δεν σημαίνει ότι θα έτρεχε στο μισό χρόνο το ίδιο πρόγραμμα, που θα έτρεχε ένας άλλος 
επεξεργαστής των 4GHz. Άρα δεν υπάρχει τέλειο scaling. </pre>
   <br><br>  
     
## <pre>Bήμα 2)</pre>  

<pre>  
</pre>  <br>
 
     
     
     
<br><br>

<br><br><br>


## Κριτική
Σαν εργασία ήταν πολύ ενδιαφέρουσα. Ασχοληθήκαμε με το πρόγραμμα McPAT και σε συνδυασμό με το gem5 πήραμε πληροφορίες για μετρήσεις που αφορούν π.χ. ισχύ, απώλεια αυτής και energy efficiency (χρησιμοποιώντας και το python script για μετατροπή σε ενέργεια). Ψάξαμε σε πολλές βιβλιογραφίες για τους όρους dynamic, leakage και short circuit power και ενισχύσαμε τις γνώσεις που αποκτήσαμε από ταμ αθήματα της ηλεκτρονικής, καθώς εδώ είδαμε να εφαρμόζονται στην πράξη. Αυτή την φορά δεν είχαμε στην έγνοια μας τους χρόνους που απαιτούνταν για την εκτέλεση των προσομοιώσεων (downside της προηγούμενης εργασίας), αφού η εργασία αυτή βασίζεται περισσότερο στην κατανόηση θερητικών αντικειμένων, πράγμα που μας χαλάρωσε λίγο. Ήρθαμε σε επαφή με πιο πρακτικά πράγματα, κάτι που δεν μας το δίνουν πολλά μαθήματα στην σχολή, όπως για παράδειγμα οι συχνότητες και οι απώλειες ισχύος των επεξεργαστών και η ταχύτητα εκτέλεσης προγραμμάτων σε διαφορετικές αρχιτεκτονικές τους. Πειραματιστήκαμε με διάφορες αρχιτεκτονικές επεξεργαστών και συνειδητοποιήσαμε ότι δεν παίζει ρόλο μόνο η ταχύτητα εκτέλεσης ενός προγράμματος, αλλά και οι απώλειες ισχύος (leakage). Συγκεκριμένα, υπάρχει δυνατότητα ένας επεξεργαστής να τρέχει πολύ πιο γρήγορα ένα πρόγραμμα, αλλα ταυτόχρονα να έχει πολύ μεγαλύτερο leakage από έναν άλλο, συνεπώς δεν μας συμφέρει. Αυτό από μόνο του σου δίνει μια αίσθηση ικανοποίησης όταν τελικά τα πράγματα τρέχουν όπως θες. Επεκτείναμε τις γνώσεις μας σχετικά με τις προσομοιώσεις, τους επεξεργαστές και τις μνήμες, ακόμα και για την ωραιοποίηση του README! Βέβαια το πρόβλημα με το ανέβασμα των αρχείων στο github επιμένει, ειδικά τώρα που φτιάξαμε και πολλους φακέλους. Εν ολίγοις ήταν μια ευχάριστη, κατανοητή εργασία, που προσφερόταν για πολύ πειραματισμό, αλλά ταυτόχρονα ήταν πολύ χρονοβόρα και επίπονη για το σύστημα.

      
<b>_Βιβλιογραφία_<b>:  https://en.wikipedia.org/wiki/CPU_power_dissipation  
https://www.hpl.hp.com/research/mcpat/micro09.pdf  
https://www.sciencedirect.com/topics/computer-science/static-power  
 https://en.wikipedia.org/wiki/CPU_cache  
  https://cirosantilli.com/linux-kernel-module-cheat/?fbclid=IwAR3h1ny5hRoVUIGP1vtOsUAzqXYd69sHBAopwuveHZtTSbd_MFp0B4Nmp8c#gem5-cpu-types  
http://gem5.org/InOrder  
http://www.m5sim.org/SimpleCPU#BaseSimpleCPU  
http://www.gem5.org/docs/html/minor.html
